<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Редагувати Підприємство</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container my-4">
    <h2 class="text-center mb-4">Редагувати підприємство</h2>

    <!-- Форма для редактирования загрязнителя -->
    <form method="post" class="border p-3 mb-3">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="btn btn-primary">Зберегти зміни</button>
    </form>

    <button id="delete-button" class="btn btn-danger mt-3">Видалити</button>
    <a href="{% url 'enterprise_list_create' %}" class="btn btn-link mt-3">Назад до списку</a>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    document.getElementById('delete-button').addEventListener('click', function() {
        if (confirm('Ви впевнені, що хочете видалити?')) {
            fetch("{% url 'enterprise_retrieve_update_delete' enterprise.id %}", {
                method: 'DELETE',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}',
                }
            })
            .then(response => {
                if (response.ok) {
                    window.location.href = "{% url 'enterprise_list_create' %}";
                } else {
                    alert("Видалення не вдалося.");
                }
            })
            .catch(error => console.error('Error:', error));
        }
    });
</script>

</body>
</html>
